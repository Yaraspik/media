{"version":3,"file":"main.js","mappings":"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","sources":["webpack://http/./src/js/VisualConstructor.js","webpack://http/./src/js/Navigator.js","webpack://http/./src/js/Validator.js","webpack://http/./src/js/app.js","webpack://http/./src/js/Timeline.js"],"sourcesContent":["export default class VisualConstructor {\n  static createDate() {\n    const date = new Date();\n\n    let dateHours = date.getHours();\n    let dateMinutes = date.getMinutes();\n    let dateDay = date.getDate();\n    let dateMonth = date.getMonth() + 1;\n\n    dateHours = (dateHours < 10) ? `0${dateHours}` : dateHours;\n    dateMinutes = (dateMinutes < 10) ? `0${dateMinutes}` : dateMinutes;\n    dateDay = (dateDay < 10) ? `0${dateDay}` : dateDay;\n    dateMonth = (dateMonth < 10) ? `0${dateMonth}` : dateMonth;\n\n    return `${dateHours}:${dateMinutes} ${dateDay}.${dateMonth}.${date.getFullYear()}`;\n  }\n\n  static createCard(item) {\n    const container = document.createElement('div');\n    container.classList.add('container', 'right');\n\n    const content = document.createElement('div');\n    content.classList.add('content');\n\n    const title = document.createElement('p');\n    title.textContent = `${item}`;\n\n    const geo = document.createElement('p');\n\n    const date = VisualConstructor.createDate();\n\n    const dateEl = document.createElement('div');\n    dateEl.classList.add('date');\n    dateEl.textContent = date;\n\n    content.append(dateEl, title, geo);\n    container.append(content);\n    return { container, geo };\n  }\n}\n","export default class Navigator {\n  static getNavigation() {\n    if (!navigator.geolocation) {\n      throw new Error('Your browser can`t check location');\n    }\n\n    return new Promise((res, rej) => {\n      navigator.geolocation.getCurrentPosition(\n        (data) => {\n          res(data.coords);\n        },\n        (err) => {\n          rej(err);\n        },\n        { enableHighAccuracy: true },\n      );\n    });\n  }\n}\n","export default class Validator {\n  static formValidate(form) {\n    const errors = {\n      patternMismatch: 'Введите координаты по шаблону: 00.00000',\n      valueMissing: 'Введите координаты',\n    };\n\n    const { elements } = form;\n    const keys = Object.keys(ValidityState.prototype);\n\n    const invalid = [...elements].some((element) => keys.some((key) => {\n      if (!element.name) return false;\n      if (key === 'valid') return false;\n\n      if (element.validity[key]) {\n        console.log(key);\n        element.setCustomValidity(errors[key]);\n        return true;\n      }\n      element.setCustomValidity('');\n      return false;\n    }));\n\n    if (invalid) {\n      form.reportValidity();\n      return false;\n    }\n\n    return true;\n  }\n\n  static validateForTests(value) {\n    const regex = /[?\\d+.\\d+[, −]+\\d+\\.\\d+]?/;\n    return regex.test(value);\n  }\n}\n","import Timeline from './Timeline';\n\nconst container = document.querySelector('.timeline');\nconst timeline = new Timeline(container);\ntimeline.init();\n","import VisualConstructor from './VisualConstructor';\nimport Navigator from './Navigator';\nimport Validator from './Validator';\n\nexport default class Timeline {\n  constructor(container) {\n    this.container = container;\n    this.controls = this.container.querySelector('.controls');\n    this.timelineForm = this.container.querySelector('.text-input__form');\n\n    this.popup = document.querySelector('.coords-popup');\n    this.popupForm = this.popup.querySelector('.coords-form');\n  }\n\n  init() {\n    this.timelineForm.addEventListener('submit', (e) => this.addCardToTimeline(e));\n  }\n\n  async addCardToTimeline(e) {\n    e.preventDefault();\n\n    const formData = new FormData(e.target);\n    const text = formData.get('content').trim();\n\n    try {\n      const coords = await Navigator.getNavigation();\n      this.latitude = coords.latitude;\n      this.longitude = coords.longitude;\n    } catch (err) {\n      if (err.code === 1) {\n        this.popup.showModal();\n        await this.responseUserCoords();\n        this.popup.close();\n      }\n    }\n\n    const newCard = VisualConstructor.createCard(text);\n    newCard.geo.textContent = `${this.latitude}, ${this.longitude}`;\n    this.container.prepend(newCard.container);\n    e.target.reset();\n  }\n\n  getUserCoords(e, res) {\n    e.preventDefault();\n\n    const valid = Validator.formValidate(e.target);\n    if (!valid) return;\n\n    const formData = new FormData(e.target);\n    this.latitude = formData.get('latitude');\n    this.longitude = formData.get('longitude');\n\n    this.popupForm.removeEventListener('submit', this.getUserCoords);\n    res();\n  }\n\n  async responseUserCoords() {\n    return new Promise((res) => {\n      this.popupForm.addEventListener('submit', (e) => this.getUserCoords(e, res));\n    });\n  }\n}\n"],"names":["VisualConstructor","static","date","Date","dateHours","getHours","dateMinutes","getMinutes","dateDay","getDate","dateMonth","getMonth","getFullYear","item","container","document","createElement","classList","add","content","title","textContent","geo","createDate","dateEl","append","Navigator","navigator","geolocation","Error","Promise","res","rej","getCurrentPosition","data","coords","err","enableHighAccuracy","Validator","form","errors","patternMismatch","valueMissing","elements","keys","Object","ValidityState","prototype","some","element","key","name","validity","console","log","setCustomValidity","reportValidity","value","test","querySelector","timeline","constructor","this","controls","timelineForm","popup","popupForm","init","addEventListener","e","addCardToTimeline","async","preventDefault","text","FormData","target","get","trim","getNavigation","latitude","longitude","code","showModal","responseUserCoords","close","newCard","createCard","prepend","reset","getUserCoords","formValidate","formData","removeEventListener"],"sourceRoot":""}